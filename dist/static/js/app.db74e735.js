(function(e){function t(t){for(var n,i,c=t[0],s=t[1],u=t[2],d=0,h=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(h.length)h.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},3992:function(e,t,a){"use strict";a("59bc")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("LayersTree")],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"800px"},attrs:{id:"map"}},[e._m(0),a("el-checkbox",{on:{change:e.changeGaoDe}},[e._v("高德地图")]),a("el-checkbox",{on:{change:e.changeTianImg_c}},[e._v("天地图影像")]),a("el-checkbox",{on:{change:e.changeWuHanDOM}},[e._v("武汉数字正射影像")]),a("el-checkbox",{on:{change:e.changeWuHanPOI}},[e._v("武汉POI")]),a("el-checkbox",{on:{change:e.changeWuHanRoads}},[e._v("武汉路网")]),a("el-checkbox",{on:{change:e.changeWuHanBoudary}},[e._v("武汉行政区划")]),a("el-checkbox",{on:{change:e.selectFeature}},[e._v("识别要素")]),a("div",{staticStyle:{display:"flex"}},[a("button",{on:{click:e.startMeasure}},[e._v("开始测距")]),a("button",{on:{click:e.stopMeasure}},[e._v("清除测距")]),a("el-button",{on:{click:function(t){return e.drawFeature("Point")}}},[e._v("画点")]),a("el-button",{on:{click:function(t){return e.drawFeature("LineString")}}},[e._v("画线")]),a("el-button",{on:{click:function(t){return e.drawFeature("Polygon")}}},[e._v("画面")]),a("el-button",{on:{click:function(t){return e.drawFeature("Circle")}}},[e._v("画圆")]),a("el-button",{on:{click:function(t){return e.draw.removeLastPoint()}}},[e._v("撤回")]),a("el-button",{on:{click:function(t){return e.map.removeInteraction(e.draw)}}},[e._v("取消")]),a("el-button",{on:{click:function(t){return e.clearDrawLayer()}}},[e._v("清除")])],1)],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[a("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"popup-closer"}}),a("div",{attrs:{id:"popup-content"}})])}],s=(a("d81d"),a("5bc0"),a("a2c7")),u=a("5eee"),l=a("2ef1"),d=a("256f"),h=a("0710"),p=a("6c77"),m=a("83a6"),f=a("8682"),w=a("ce2c"),v=a("f2f0"),y=a("480c"),g=a("ac29"),b=a("790a"),L=a("35a7"),_=a("a2e1"),O=a("3e6b"),k=a("5831"),M=a("bc3a"),P=a.n(M),S=a("2ce2"),x=a("06f8"),j={name:"LayersTree",data:function(){return{map:null,overlay:null,opacity:1,drawLayers:[],drawDoms:[],draw_source:new k["a"],draw_vector:{},draw:{}}},methods:{initMap:function(){var e="map",t=[new y["a"]({source:new l["a"]({url:"http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}"})})],a=new s["a"]({center:Object(d["d"])([114.5,30.5]),zoom:10,projection:"EPSG:3857"});this.map=new u["a"]({target:e,layers:t,view:a})},changeGaoDe:function(e){e?(this.GaoDeLayer=new y["a"]({name:"高德图层",source:new l["a"]({url:"http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}"})}),this.map.addLayer(this.GaoDeLayer)):this.map.removeLayer(this.GaoDeLayer)},changeTianImg_c:function(e){e?(this.TianLayerImg=new y["a"]({name:"天地图影像图层",source:new l["a"]({url:"http://t3.tianditu.com/DataServer?T=img_w&tk=a1ab26b7cbbee08dcfa15798f6b89d2e&x={x}&y={y}&l={z}"})}),this.map.addLayer(this.TianLayerImg)):this.map.removeLayer(this.TianLayerImg)},changeWuHanDOM:function(e){e?(this.WMSLayer=new y["a"]({name:"武汉DOM",source:new v["a"]({url:"http://localhost:8090/geoserver/wuhan/wms",params:{VERSION:"1.1.1",FORMAT:"image/png8",LAYERS:"wuhan:wuhandom"}})}),this.map.addLayer(this.WMSLayer)):this.map.removeLayer(this.WMSLayer)},changeWuHanPOI:function(e){e?(this.WMSLayer=new O["a"]({name:"武汉POI",source:new k["a"]({format:new _["a"],url:"http://localhost:8090/geoserver/wuhan/wms?service=WMS&version=1.1.0&request=GetMap&layers=wuhan%3Awuhan_poi&bbox=113.711373%2C30.0113281%2C115.0092344%2C31.3287723&width=756&height=768&srs=EPSG%3A3857&styles=&format=application%2Fjson%3Btype%3Dgeojson"})}),this.map.addLayer(this.WMSLayer)):this.map.removeLayer(this.WMSLayer)},changeWuHanRoads:function(e){var t=this;e?P()({methods:"GET",url:"http://localhost:8090/geoserver/wuhan/ows",params:{service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"wuhan:wuhan_roads_result",outputFormat:"application/json"}}).then((function(e){var a=new k["a"]({features:new _["a"]({featureProjection:"EPSG:3857"}).readFeatures(e.data)});t.vectorLayer=new O["a"]({source:a}),t.map.addLayer(t.vectorLayer)})).catch((function(e){console.log("请求失败，失败信息："+e)})):this.map.removeLayer(this.vectorLayer)},changeWuHanBoudary:function(e){var t=this;e?P()({methods:"GET",url:"http://localhost:8090/geoserver/wuhan/ows",params:{service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"wuhan:武汉市",outputFormat:"application/json"}}).then((function(e){var a=new k["a"]({features:new _["a"]({featureProjection:"EPSG:3857"}).readFeatures(e.data)});t.vectorLayer=new O["a"]({source:a}),t.map.addLayer(t.vectorLayer)})).catch((function(e){console.log("请求失败，失败信息："+e)})):this.map.removeLayer(this.vectorLayer)},selectFeature:function(e){if(e){var t=new S["a"];this.map.addInteraction(t),this.select=new S["a"]({condition:x["d"]}),this.map.addInteraction(this.select),this.select.on("select",(function(e){var t=e.target.getFeatures().getArray();if(t.length>0){var a=t[0],n=a.getProperties();r.innerHTML="Name:<code>"+n.Name+"</code>"}console.log(n),console.log(n.Name)}));var a=document.getElementById("popup"),n=document.getElementById("popup-closer"),r=document.getElementById("popup-content");this.overlay=new h["a"]({element:a,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.addOverlay(this.overlay);var o=this;this.map.on("click",(function(e){o.overlay.setPosition(e.coordinate)})),n.onclick=function(){return o.overlay.setPosition(void 0),n.blur(),!1}}else this.map.removeOverlay(this.overlay)},addDrawLayer:function(){this.draw_vector=new O["a"]({source:this.draw_source,style:new p["c"]({fill:new m["a"]({color:"rgba(255, 255, 255, 0.2)"}),stroke:new f["a"]({color:"#ffcc33",width:3}),image:new w["a"]({radius:7,fill:new m["a"]({color:"#ffcc33"})})})}),this.map.addLayer(this.draw_vector)},clearDrawLayer:function(){this.map.removeInteraction(this.draw),this.draw_vector.getSource().clear()},drawFeature:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.map.removeInteraction(this.draw),this.draw=new g["a"]({source:this.draw_source,type:e,style:new p["c"]({fill:new m["a"]({color:"rgba(255, 255, 255, 0.2)"}),stroke:new f["a"]({color:"#ffcc33",width:2}),image:new w["a"]({radius:7,fill:new m["a"]({color:"#ffcc33"})})})}),this.map.addInteraction(this.draw)},startMeasure:function(){var e,t,a,n,r,o,i,c=new k["a"],s=new O["a"]({source:c,style:new p["c"]({fill:new m["a"]({color:"rgba(255, 255, 255, 0.2)"}),stroke:new f["a"]({color:"#ffcc33",width:2}),image:new w["a"]({radius:7,fill:new m["a"]({color:"#ffcc33"})})})}),u=this,l=this.map.on("pointermove",(function(a){var r="点击地图开始测距";e&&(r="双击地图作为结束点"),n.innerHTML=r,t.setPosition(a.coordinate),n.classList.remove("hidden")}));o=new g["a"]({source:c,type:"LineString",style:new p["c"]({fill:new m["a"]({color:"rgba(255, 255, 255, 0.2)"}),stroke:new f["a"]({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new w["a"]({radius:5,stroke:new f["a"]({color:"rgba(0, 0, 0, 0.7)"}),fill:new m["a"]({color:"rgba(255, 255, 255, 0.2)"})})})}),o.on("drawstart",(function(t){e=t.feature;var n=t.coordinate;i=e.getGeometry().on("change",(function(e){var t=e.target,o=d(t);n=t.getLastCoordinate(),r.innerHTML=o,a.setPosition(n)}))})),this.map.getViewport().addEventListener("mouseout",(function(){n.classList.add("hidden")})),o.on("drawend",(function(){r.className="ol-tooltip ol-tooltip-static",a.setOffset([0,-7]),e=null,r=null,y(),u.map.removeInteraction(o),Object(L["b"])(i),Object(L["b"])(l)}));var d=function(e){var t,a=Object(b["b"])(e);return t=a>100?Math.round(a/1e3*100)/100+" km":Math.round(100*a)/100+" m",t};function v(){n&&n.parentNode.removeChild(n),n=document.createElement("div"),n.className="ol-tooltip hidden",t=new h["a"]({element:n,offset:[15,0],positioning:"center-left"}),u.map.addOverlay(t)}function y(){r&&r.parentNode.removeChild(r),r=document.createElement("div"),r.className="ol-tooltip ol-tooltip-measure",a=new h["a"]({element:r,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),u.drawDoms.push(r),u.map.addOverlay(a)}v(),y(),this.map.addInteraction(o),this.drawLayers.push(s),this.map.addLayer(s)},stopMeasure:function(){var e=this.drawLayers;console.log(this.drawDoms);for(var t=0;t<e.length;t++)this.map.removeLayer(e[t]);for(var a=0;a<this.drawDoms.length;a++)this.drawDoms[a].parentNode.removeChild(this.drawDoms[a])}},mounted:function(){this.initMap(),this.addDrawLayer()}},D=j,I=(a("3992"),a("2877")),F=Object(I["a"])(D,i,c,!1,null,null,null),E=F.exports,T={name:"app",components:{LayersTree:E}},W=T,G=Object(I["a"])(W,r,o,!1,null,null,null),N=G.exports,H=a("5c96"),z=a.n(H);a("0fae");n["default"].config.productionTip=!1,n["default"].use(z.a),new n["default"]({render:function(e){return e(N)}}).$mount("#app")},"59bc":function(e,t,a){}});
//# sourceMappingURL=app.db74e735.js.map